<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/bwip-js/dist/bwip-js-min.js"></script>
    <style>
        body {     display: flex; justify-content: center;  align-items: center;  height: 100vh;  margin: 0;  background: white; { max-width: 90%; height: auto; border: 1px solid #eee; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="msg" style="margin-top: 10px; color: gray;"></div>
    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const myCode = urlParams.get('code');
            const msg = document.getElementById('msg');

            if (!myCode) {
                msg.innerText = "請在網址後方加上 ?code=/號碼";
                return;
            }

            try {
                bwipjs.toCanvas('canvas', {
                    bcid: 'code128',
                    text: myCode,
                    scale: 5,
                    height: 15,
                    includetext: true,
                    textxalign: 'center',
                });
                msg.innerText = "條碼已生成：" + myCode;
            } catch (e) {
                msg.innerText = "生成失敗：" + e;
            }
        };
    </script>
</body>
</html>
